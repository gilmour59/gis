<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>GIS</title>

        <style>
            #map{
                width:100%;
                height:400px;
            }
        </style>

        <!-- Leaflet -->
        <link rel="stylesheet" href="/components/leaflet/leaflet.css">

        <!-- Bootstrap 3.3.7 -->
        <link rel="stylesheet" href="/components/bootstrap/dist/css/bootstrap.min.css">
        
        <!-- DataTables -->
        <link rel="stylesheet" href="/components/datatables.net-bs/css/dataTables.bootstrap.min.css">
        <link rel="stylesheet" href="/components/datatables.net-bs/css/responsive.bootstrap.min.css">

        <!-- Leaflet Measure -->
        <link rel="stylesheet" href="/components/leaflet-measure/leaflet-measure.css">

        <!-- Leaflet Marker Cluster -->
        <link rel="stylesheet" href="/components/leaflet-marker-cluster/MarkerCluster.Default.css">
        <link rel="stylesheet" href="/components/leaflet-marker-cluster/MarkerCluster.css">

        <!-- Leaflet Geocoder -->
        <link rel="stylesheet" href="/components/leaflet-geocoder/Control.Geocoder.css">

        <!-- jQuery 3 -->
        <script src="/components/jquery/dist/jquery.min.js"></script>

        <!-- Bootstrap 3.3.7 -->
        <script src="/components/bootstrap/dist/js/bootstrap.min.js"></script>

        <!-- SlimScroll -->
        <script src="/components/jquery-slimscroll/jquery.slimscroll.min.js"></script>

        <!-- FastClick -->
        <script src="/components/fastclick/lib/fastclick.js"></script>

        <!-- DataTables -->
        <script src="/components/datatables.net/js/jquery.dataTables.min.js"></script>
        <script src="/components/datatables.net-bs/js/dataTables.bootstrap.min.js"></script>
        <script src="/components/datatables.net-bs/js/dataTables.responsive.min.js"></script>
        <script src="/components/datatables.net-bs/js/responsive.bootstrap.min.js"></script>

        <!-- SweetAlert -->
        <script src="/components/sweetalert/sweetalert2@10.js"></script>

        <!-- Leaflet -->
        <script src="/components/leaflet/leaflet.js"></script>

        <!-- Leaflet Browser Print -->
        <script src="/components/leaflet-browser-print/leaflet.browser.print.min.js"></script>

        <!-- Leaflet Measure -->
        <script src="/components/leaflet-measure/leaflet-measure.js"></script>

        <!-- Leaflet Marker Cluster -->
        <script src="components/leaflet-marker-cluster/leaflet.markercluster.js"></script>

        <!-- Leaflet Geocoder -->
        <script src="components/leaflet-geocoder/Control.Geocoder.js"></script>
    </head>
    <body>
        <div id="map"></div>
        <button onclick=fullScreenView()>View in fullscreen</button>
        <div class="coordinate"></div>
        <button class="print-map">Print Map</button>
        <button class="zoom-to-layer">Zoom to Layer</button>

        <script src="/data/test.js"></script>
        <script>
            //initiate map
            var map = L.map('map').setView([11.5529, 122.7407], 7);

            map.zoomControl.setPosition('topright');

            //title layer
            var osm = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
            }).addTo(map);

            var stamen_watercolor = L.tileLayer('https://stamen-tiles-{s}.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.{ext}', {
                attribution: 'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
                subdomains: 'abcd',
                minZoom: 1,
                maxZoom: 16,
                ext: 'jpg'
            });   

            var stamen_toner = L.tileLayer('https://stamen-tiles-{s}.a.ssl.fastly.net/toner/{z}/{x}/{y}{r}.{ext}', {
                attribution: 'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
                subdomains: 'abcd',
                minZoom: 0,
                maxZoom: 20,
                ext: 'png'
            });     

            var first_marker = L.marker([11.5529, 122.7407])
                .bindPopup('A pretty CSS3 popup.<br> Easily customizable.')
                .openPopup();

            //add map scale
            L.control.scale({position : 'bottomleft'}).addTo(map);

            //fullscreen map view
            var map_id = document.getElementById('map');
            function fullScreenView(){
                map_id.requestFullscreen();
            }

            //Map coordinate
            map.on('mousemove', function(event){
                $('.coordinate').html("Lat: " + event.latlng.lat + ", Lng: " + event.latlng.lng);
            });

            //Map print
            L.control.browserPrint().addTo(map);         
            
            //Leaflet measure
            L.control.measure({ 
                primaryLengthUnit: 'meters', 
                secondaryLengthUnit: 'kilometers',
                primaryAreaUnit: 'sqmeters',
                secondaryAreaUnit: undefined
            }).addTo(map);

            //Geojson load using marker cluster
            var marker_cluster = L.markerClusterGroup();
            var test_data = L.geoJSON(data, {
                onEachFeature : function(feature, layer){                    
                    layer.bindPopup('coordinates: ' + feature.geometry.coordinates[0] + ', ' + feature.geometry.coordinates[1]);
                } 
            });
            
            test_data.addTo(marker_cluster);
            marker_cluster.addTo(map);

            //Geocoder (search)
            L.Control.geocoder().addTo(map);

            //Leaflet layer control
            var base_maps = {
                'OSM' : osm,
                'Water Color Map' : stamen_watercolor,
                'Stamen Toner Map' : stamen_toner
            }

            //use this to initiate the marker cluster
            var overlayer_maps = {
                'Leaflet First Marker' : first_marker,
                'GeoJSON Markers' : marker_cluster,
            }

            L.control.layers(base_maps, overlayer_maps).addTo(map);
            
            //Zoom to layer
            $('.zoom-to-layer').click(function(){

                map.setView([11.5529, 122.7407], 7);
            });
        </script>
    </body>
</html>